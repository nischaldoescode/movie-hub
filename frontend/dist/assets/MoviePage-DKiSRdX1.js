import{b as Me,u as ze,r as j,j as t,a as Re,c as Be,X as Te,F as Fe}from"./main-F7ziLQoi.js";import{M as qe,S as He,a as _e}from"./MovieCast-Tcf_Q4GX.js";import{P as We}from"./star-BSpultc5.js";const rt=()=>{var me;const{id:U}=Me(),{getMovieDetails:ae,getStreamingUrl:le,handlePlayerLoaded:ye,playerLoading:we,activeServer:J,switchServer:be}=ze(),[y,xe]=j.useState(null),[ce,Ee]=j.useState(null),[Ne,Q]=j.useState(!0),[G,de]=j.useState(""),[ee,ke]=j.useState(!1),[F,$e]=j.useState(!0),[je,Z]=j.useState(!1),[te,Ue]=j.useState("high"),[Ve,a]=j.useState(0),[Ge,Ze]=j.useState(!1),[Xe,Ye]=j.useState(!1),[Ke,Je]=j.useState(!1),ne=j.useRef(null),g=j.useRef(null),X=j.useRef(null),Le=j.useRef(null),Se=j.useRef(null),V=j.useRef(null),c=j.useRef(0);j.useEffect(()=>{if(!G||!F)return;let d=!0,x=0,z=0,w={};const P=/pop|click|redirect|offer|win|prize|free|bonus|ad|banner|track|survey|smart|clk|advert|campaign|campaign|IOarzRhPlPOverlay|modal|selectextShadowHos|shadow|znid|donto|popcash|display/i,L=/doubleclick|adservice|adnxs|adsystem|adsrvr|taboola|outbrain|revcontent|zedo|adroll|rubiconproject|openx|criteo|pubmatic|smartadserver|adtechus|quantserve|mediamath|turn|intellipopup|popcash|custom|effectivemeasure/i,A=r=>{const e=r.src||"",i=r.textContent||"",h=i.includes("adserverDomain")||i.includes("qqsfafvkgsyto.online")||i.match(/\.online"/)||i.match(/[a-zA-Z0-9]{20,}\.(?:online|com|net|xyz|top|site|club|info|biz|link)/),p=i.match(/window\['[a-zA-Z0-9]{20,}'\]/)||i.match(/var [a-zA-Z0-9]{15,}/)||i.match(/let [a-zA-Z0-9]{15,}/)||i.match(/const [a-zA-Z0-9]{15,}/);return L.test(e)||P.test(e)||e.includes("popcash")||e.includes("intellipopup")||e.includes("script-custom.js")||i.includes("znid")||i.includes("donto")||i.includes("IOarzRhPlP")||i.includes("popads-script")||i.includes("videoOverlay")||i.includes("script-custom.js")||h||p||i.includes("x4G9Tq2Kw6R7v1Dy3P0B5N8Lc9M2zF")||i.match(/window\.open|popup|redirect|location\s*=|postMessage|_blank/i)};(()=>{w={windowOpen:window.open,alert:window.alert,confirm:window.confirm,prompt:window.prompt,createElement:document.createElement,appendChild:Element.prototype.appendChild,insertBefore:Element.prototype.insertBefore,setAttribute:Element.prototype.setAttribute,postMessage:window.postMessage,setInterval:window.setInterval,setTimeout:window.setTimeout,requestAnimationFrame:window.requestAnimationFrame}})(),window.open=function(...r){if(!r[0])return null;const e=r[0].toString();return r[1]&&r[1].includes("_blank")?(console.log("Blocked _blank target:",e),c.current++,a(h=>h+1),null):P.test(e)||L.test(e)||e.startsWith("javascript:")||e.startsWith("data:")||document.referrer&&P.test(document.referrer)?(console.log("Popup blocked:",e),c.current++,a(h=>h+1),null):(console.log("Popup blocked (default protection):",e),c.current++,a(h=>h+1),null)},window.alert=function(){return null},window.confirm=function(){return!1},window.prompt=function(){return null},window.setInterval=function(r,e,...i){return e<300&&(e=1e3),w.setInterval.call(window,r,e,...i)},window.setTimeout=function(r,e,...i){const h=r.toString().toLowerCase();return h.includes("window.open")||h.includes("location")||h.includes("popup")||h.includes("adv")?(console.log("Blocked suspicious timeout"),c.current++,a(p=>p+1),0):w.setTimeout.call(window,r,e,...i)},window.requestAnimationFrame=function(r){return w.requestAnimationFrame.call(window,r)};const C=document.createElement;document.createElement=function(r){const e=C.call(document,r);if(r.toLowerCase()==="iframe"&&setTimeout(()=>{try{e.setAttribute("referrerpolicy","no-referrer"),e.setAttribute("loading","lazy"),e.setAttribute("importance","low"),e.setAttribute("allowfullscreen","false"),e.setAttribute("allow","fullscreen; camera *; microphone *"),(()=>{e.addEventListener("load",function(){try{const p=e.src||"";(L.test(p)||P.test(p))&&(console.log("Blocked suspicious iframe load:",p),e.src="about:blank",c.current++,a(m=>m+1));try{e.contentWindow&&(e.contentWindow.open=function(){return console.log("Iframe popup blocked"),c.current++,a(m=>m+1),null},e.contentWindow.alert=function(){return null},e.contentWindow.confirm=function(){return!1},e.contentWindow.prompt=function(){return null},Object.defineProperty(e.contentWindow,"location",{get:function(){return window.location},set:function(m){return console.log("Blocked iframe location change to:",m),c.current++,a(q=>q+1),window.location}}))}catch{}}catch(p){console.log("Error in iframe load handler:",p)}})})();const h=e.setAttribute;e.setAttribute=function(p,m){if(p.toLowerCase()==="src"&&(L.test(m)||P.test(m))){console.log("Blocked suspicious iframe src:",m),c.current++,a(q=>q+1);return}return h.call(this,p,m)},console.log("Enhanced iframe security applied")}catch{console.log("Could not enhance iframe security")}},0),r.toLowerCase()==="script"){const i=e.setAttribute;e.setAttribute=function(p,m){if(p.toLowerCase()==="src"&&(L.test(m)||P.test(m))){console.log("Blocked script src attribute:",m),c.current++,a(q=>q+1);return}return i.call(this,p,m)};let h="";Object.defineProperty(e,"textContent",{get:function(){return h},set:function(p){if(p&&(p.includes("adserverDomain")||p.includes("qqsfafvkgsyto.online")||p.includes("x4G9Tq2Kw6R7v1Dy3P0B5N8Lc9M2zF")||p.match(/window\['[a-zA-Z0-9]{20,}'\]/))){console.log("Blocked suspicious script content"),c.current++,a(m=>m+1);return}h=p}}),Object.defineProperty(e,"innerHTML",{set:function(p){if(p&&(p.includes("adserverDomain")||p.includes("qqsfafvkgsyto.online")||p.includes("x4G9Tq2Kw6R7v1Dy3P0B5N8Lc9M2zF")||p.match(/window\['[a-zA-Z0-9]{20,}'\]/))){console.log("Blocked suspicious script innerHTML"),c.current++,a(m=>m+1);return}HTMLScriptElement.prototype.innerHTML=p}})}return e};const l=Element.prototype.appendChild;Element.prototype.appendChild=function(r){if(r.tagName==="IFRAME"){const e=r.src||"";if(L.test(e)||P.test(e))return console.log("Blocked suspicious iframe append:",e),c.current++,a(i=>i+1),r}if(r.tagName==="SCRIPT"){const e=r.textContent||"",i=r.src||"";if(e.match(/window\.open|popup|banner|redirect|location\s*=|postMessage/i)||L.test(i))return console.log("Blocked suspicious script append"),c.current++,a(h=>h+1),r}return l.call(this,r)};const v=Element.prototype.insertBefore;if(Element.prototype.insertBefore=function(r,e){if(r.tagName==="IFRAME"||r.tagName==="SCRIPT"){const i=r.src||"";if(L.test(i)||P.test(i))return console.log("Blocked suspicious element insertion:",i),c.current++,a(h=>h+1),r}return v.call(this,r,e)},window.postMessage=function(r,e,i){const h=typeof r=="string"?r:JSON.stringify(r);if(P.test(h)){console.log("Blocked suspicious postMessage:",e),c.current++,a(m=>m+1);return}const p=e||"*";return w.postMessage.call(window,r,p,i)},X.current){const r=X.current,e=document.createElement("div");e.className="popup-shield",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="9999",e.style.background="transparent",e.style.cursor="default",e.style.display="block",e.style.pointerEvents="auto",Se.current=e,r.appendChild(e);const i=document.createElement("div");i.className="ad-overlay-blocker",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="10000",i.style.background="rgba(0,0,0,0.9)",i.style.display="none",i.style.alignItems="center",i.style.justifyContent="center",i.style.flexDirection="column",i.innerHTML=`
        <div style="display: flex; align-items: center; margin-bottom: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #f59e0b; margin-right: 8px;">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          <div style="color:white; font-size:16px; font-weight:500;">Popup/Ad Blocked</div>
        </div>
        <div style="color:#d1d5db; font-size:14px; margin-bottom:16px; max-width:80%; text-align:center;">
          Our system detected and blocked potentially harmful content from the video player
        </div>
        <button style="background:#3b82f6; color:white; border:none; padding:8px 20px; border-radius:4px; cursor:pointer; font-size:14px; font-weight:500; display:flex; align-items:center; justify-content:center;">
          <span style="margin-right:6px">Continue to Video</span>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
        </button>
      `,r.appendChild(i);const h=()=>{if(!d)return;i.style.display="flex",Z(!0);const n=3e3+Math.random()*2e3;V.current=setTimeout(()=>{d&&(i.style.display="none",Z(!1))},n)},p=i.querySelector("button");p&&p.addEventListener("click",()=>{i.style.display="none",Z(!1),clearTimeout(V.current)});const m=n=>{var N,f,b,s,E,D,T,_,W,$,K,fe,ge,he,ve;if(!F)return!0;const M=Date.now(),k=["time-slider","duration-150","media-buffering","-mt-0.5"];let o=n.target,O=!1;for(let H=0;H<4&&o;H++){const se=((N=o.className)==null?void 0:N.toString())||"";if(O=k.some(ie=>se.includes(ie)),O){const ie=window.location.href;return setTimeout(()=>{window.location.href!==ie&&(console.log("Blocked redirect from player control"),window.history.back(),c.current++,a(De=>De+1))},100),!0}o=o.parentElement}if(!(te==="high"||te==="medium"&&n.type!=="mousemove"))return!0;if(x>0&&M-z<500+Math.random()*300)return n.stopPropagation(),n.preventDefault(),h(),c.current++,a(H=>H+1),x=0,!1;(n.type==="click"||n.type==="mousedown")&&(x++,setTimeout(()=>{x=0},2e3)),z=M;const R=n.target.tagName==="A"||n.target.tagName==="BUTTON"||n.target.tagName==="IMG"||n.target.onclick||n.target.hasAttribute("onclick")||n.target.hasAttribute("href")||n.target.hasAttribute("data-href")||n.target.hasAttribute("data-link")||n.isTrusted===!1||n.target.style.cursor==="pointer"||n.target.getAttribute("role")==="button"||((f=n.target.className)==null?void 0:f.includes("btn"))||((b=n.target.className)==null?void 0:b.includes("button"))||((s=n.target.className)==null?void 0:s.includes("ad"))||((E=n.target.className)==null?void 0:E.includes("video-layout_controls__rRx2z"))||((D=n.target.className)==null?void 0:D.includes("selectextShadowHost"))||((T=n.target.className)==null?void 0:T.includes("closeButton"))||((_=n.target.className)==null?void 0:_.includes("IOarzRhPlPOverlay"))||((W=n.target.className)==null?void 0:W.includes("absolute inset-0"))||(($=n.target.id)==null?void 0:$.includes("ad"))||((K=n.target.id)==null?void 0:K.includes("modal"))||((fe=n.target.id)==null?void 0:fe.includes("closeButton"))||((he=(ge=n.target.parentElement)==null?void 0:ge.className)==null?void 0:he.includes("ad"))||n.target.style.position==="absolute"&&(n.target.style.opacity==="0"||parseFloat(n.target.style.opacity)<.1)||n.clientX<5||n.clientX>window.innerWidth-5||n.clientY<5||n.clientY>window.innerHeight-5,B=H=>{const se=H.innerText||H.textContent||"";return P.test(se)},u=B(n.target)||B(n.target.parentElement)||B((ve=n.target.parentElement)==null?void 0:ve.parentElement);if(R||u)return n.stopPropagation(),n.preventDefault(),h(),c.current++,a(H=>H+1),!1};e.addEventListener("click",m,!0),e.addEventListener("mousedown",m,!0),e.addEventListener("mouseup",m,!0),e.addEventListener("dblclick",m,!0),e.addEventListener("contextmenu",m,!0),e.addEventListener("auxclick",m,!0),e.addEventListener("pointerdown",m,!0),e.addEventListener("click",n=>{if(n.target.tagName==="A"||n.target.closest("a"))return console.log("Blocked click on link in player area"),n.preventDefault(),n.stopPropagation(),c.current++,a(I=>I+1),!1;const k=n.clientX,o=n.clientY,O=window.location.href;setTimeout(()=>{window.location.href!==O&&(console.log("Detected redirect after click at",k,o),history.back(),c.current++,a(I=>I+1),h())},100)},!0);const q=()=>{try{if(!g.current)return;const n=()=>{try{if(!g.current||!g.current.contentDocument)return;const u=g.current.contentDocument,N=new MutationObserver(f=>{f.forEach(b=>{b.addedNodes&&b.addedNodes.length&&b.addedNodes.forEach(s=>{if(s.nodeType===1&&(s.className&&typeof s.className=="string"&&(s.className.includes("selectextShadowHost")||s.className.includes("IOarzRhPlPOverlay"))&&(s.remove(),c.current++,a(E=>E+1)),s.id==="videoOverlay"&&(s.remove(),c.current++,a(E=>E+1)),s.hasAttribute&&s.hasAttribute("znid")&&(s.remove(),c.current++,a(E=>E+1)),s.tagName==="SCRIPT")){const E=s.src||"",D=s.textContent||"";(E.includes("intellipopup")||D.includes("popup-ads")||D.includes("window.open")||D.includes("_blank")||D.includes("target=")||D.includes("location.href")||s.id&&s.id.includes("ads"))&&(s.remove(),c.current++,a(T=>T+1))}})})});return N.observe(u,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id","style","znid"]}),N}catch(u){return console.log("Error setting up DOM observer:",u),null}};let M=0;const k=()=>{try{if(!g.current.contentDocument)return;const u=document.createElement("meta");u.httpEquiv="Content-Security-Policy",u.content="default-src 'self' 'unsafe-inline' 'unsafe-eval' blob: data:; object-src 'none';";try{g.current.contentDocument.head.appendChild(u)}catch{console.log("Could not inject CSP")}const N=document.createElement("script");N.textContent=`
                (function() {
                  // Override window.open
                  window.open = function() { return null; };
                  
                  // Override dialog functions
                  window.alert = function() { return null; };
                  window.confirm = function() { return false; };
                  window.prompt = function() { return null; };
                  
                  // Prevent new windows
                  document.addEventListener('click', function(e) {
                    if (e.target.tagName === 'A' && e.target.target === '_blank') {
                      e.preventDefault();
                    }
                  }, true);
                  
                  // Monitor for dynamic iframe creation
                  const originalCreateElement = document.createElement;
                  document.createElement = function(tag) {
                    const el = originalCreateElement.call(document, tag);
                    if (tag.toLowerCase() === 'iframe') {
                      // Apply protection to new iframes
                      el.onload = function() {
                        try {
                          el.contentWindow.open = function() { return null; };
                        } catch(e) {}
                      };
                    }
                    return el;
                  };
                })();
              `;try{g.current.contentDocument.head.appendChild(N)}catch{console.log("Could not inject protection script")}}catch{console.log("Could not access iframe document")}};g.current.addEventListener("load",()=>{M++,console.log(`Frame load attempt ${M}`);try{const u=g.current.contentWindow;if(u){try{u.addEventListener("beforeunload",function(b){return console.log("Blocked navigation attempt via beforeunload"),c.current++,a(s=>s+1),b.preventDefault(),b.returnValue="",""}),u.addEventListener("hashchange",function(b){const s=u.location.hash;P.test(s)&&(console.log("Blocked suspicious hash navigation:",s),c.current++,a(E=>E+1),b.preventDefault())});const N=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){return console.log("Blocked form submission"),c.current++,a(b=>b+1),!1},new MutationObserver(b=>{b.forEach(s=>{s.addedNodes&&s.addedNodes.forEach(E=>{E.tagName==="FORM"&&E.addEventListener("submit",function(D){return console.log("Blocked form submit event"),D.preventDefault(),c.current++,a(T=>T+1),!1})})})}).observe(u.document,{childList:!0,subtree:!0})}catch(N){console.log("Could not add navigation event listeners:",N)}try{u.alert=function(){return null},u.confirm=function(){return!1},u.prompt=function(){return null}}catch{console.log("Could not override frame dialogs")}try{u.addEventListener("blur",function(N){console.log("Frame blur detected - potential popunder"),u.focus(),c.current++,a(f=>f+1)})}catch{console.log("Could not add blur listener")}}k()}catch(u){console.log("Protected frame access error:",u)}if(M>3){console.log("Excessive frame reloads detected - freezing iframe");try{g.current.src="about:blank"}catch{}}});const o=new MutationObserver(u=>{u.forEach(N=>{N.attributeName==="src"&&console.log("iframe src changed")})}),I=setInterval(()=>{try{if(!g.current||!g.current.contentDocument)return;const u=g.current.contentDocument,N=f=>{const b=u.getElementsByClassName(f);if(b&&b.length)for(let s=0;s<b.length;s++)b[s].remove(),c.current++,a(E=>E+1);try{const s=u.querySelectorAll(`.${f}, #${f}, [class*="${f}"], [id*="${f}"], 
                     [class^="${f}"], [id^="${f}"], [class$="${f}"], [id$="${f}"]`);s&&s.length&&s.forEach(E=>{E.remove(),c.current++,a(D=>D+1)})}catch(s){console.log(`Error with querySelector for ${f}:`,s)}};try{const f=u.querySelectorAll('[znid], [donto], [style*="z-index:"], [style*="position: absolute"][style*="z-index"], .selectextShadowHost, .IOarzRhPlPOverlay, #videoOverlay, [class*="selectextShadowHost"], [class*="IOarzRhPlPOverlay"], [id="videoOverlay"], [id*="videoOverlay"]');f&&f.length&&f.forEach(s=>{s.remove(),c.current++,a(E=>E+1)});const b=u.querySelectorAll('script[src*="intellipopup"], script[src*="popup"], script[src*="ad"], script[id*="ad"], script[class*="ad"], script[id*="popup-ads"], script[type="text/javascript"][id*="ad"], script[src*="popcash"]');b&&b.length&&b.forEach(s=>{s.remove(),c.current++,a(E=>E+1)})}catch(f){console.log("Error removing znid elements:",f)}N("IOarzRhPlPOverlay"),N("selectextShadowHost"),N("intellipopup"),N("videoOverlay");try{u.querySelectorAll("*").forEach(b=>{b.shadowRoot&&b.shadowRoot.querySelectorAll(".selectextShadowHost, .IOarzRhPlPOverlay, #videoOverlay").forEach(E=>{E.remove(),c.current++,a(D=>D+1)})})}catch(f){console.log("Shadow DOM cleaning error:",f)}}catch(u){console.log("Error removing known bad elements:",u)}},200);clearInterval(I),o.observe(g.current,{attributes:!0});const B=setInterval(()=>{try{if(!g.current||!g.current.contentDocument)return;const u=g.current.contentDocument,N=['div[style*="position:fixed"][style*="z-index:9999"]','div[style*="position: fixed"][style*="z-index: 9999"]','div[style*="position:absolute"][style*="z-index:9999"]','div[style*="position: absolute"][style*="z-index: 9999"]','div[style*="position:fixed"][style*="inset:"]','div[style*="position: fixed"][style*="inset:"]','div[style*="position:fixed"][style*="top:"][style*="left:"][style*="right:"][style*="bottom:"]','div[style*="position: fixed"][style*="top:"][style*="left:"][style*="right:"][style*="bottom:"]','div[style*="pointer-events:none"]','div[style*="pointer-events: none"]','div[style*="opacity:0"]','div[style*="opacity: 0"]'],f=u.querySelectorAll(N.join(","));f&&f.length&&f.forEach(s=>{console.log("Removing invisible overlay:",s),s.remove(),c.current++,a(E=>E+1)}),u.querySelectorAll("div").forEach(s=>{const D=window.getComputedStyle(s).position;if(D==="fixed"||D==="absolute"){const T=s.getBoundingClientRect(),_=window.innerWidth,W=window.innerHeight;T.width>_*.5&&T.height>W*.5&&(s.innerText.trim().length>0||s.querySelectorAll("img, video, svg").length>0||(console.log("Removing large overlay div:",s),s.remove(),c.current++,a(K=>K+1)))}})}catch(u){console.log("Error removing invisible overlays:",u)}},300);clearInterval(B)}catch(n){console.log("Could not enhance iframe:",n)}},Ie=setInterval(()=>{try{if(!g.current||!g.current.contentDocument)return;const n=g.current.contentDocument,M=['[class*="intellipopup"]','[class*="IOarzRhPlPOverlay"]','[class*="selectextShadowHos"]','[class*="shadow"]',"[znid]","[donto]",'div[style*="position: absolute"][style*="z-index"]','iframe[style*="position: absolute"]','script[src*="popcash"]'],k=n.querySelectorAll(M.join(","));k&&k.length&&k.forEach(o=>{o.remove(),c.current++,a(O=>O+1)})}catch(n){console.log("Error in scanForProblematicElements:",n)}},200);q();let Y=null;g.current&&g.current.addEventListener("load",()=>{observeDOM()});const pe=()=>{try{if(!g.current||!g.current.contentWindow)return;let n=null;try{n=g.current.contentDocument||g.current.contentWindow.document}catch{console.log("Cannot access iframe content directly")}n&&(Y=new MutationObserver(M=>{M.forEach(k=>{if(k.type==="childList"&&k.addedNodes.length&&k.addedNodes.forEach(o=>{var O,I,R,B,u,N,f;o.nodeType===1&&(((O=o.id)!=null&&O.toLowerCase().match(/ad|popup|overlay|banner|float|promo|sponsor|offer|selectextShadowHost|interstitial|closeButton|IOarzRhPlPOverlay/i)||(I=o.className)!=null&&I.toLowerCase().match(/ad|popup|overlay|banner|float|promo|sponsor|offer|selectextShadowHost|closeButton|interstitial|IOarzRhPlPOverlay/i)||((R=o.style)==null?void 0:R.zIndex)>100||((B=o.style)==null?void 0:B.position)==="fixed"||((u=o.style)==null?void 0:u.position)==="absolute"||((N=o.style)==null?void 0:N.width)==="100%"&&((f=o.style)==null?void 0:f.height)==="100%"||o.tagName==="IFRAME")&&(o.remove(),c.current++,a(s=>s+1)),o.tagName==="SCRIPT"&&A(o)&&(o.remove(),c.current++,a(s=>s+1)),o.tagName==="A"&&(o.target==="_blank"||P.test(o.href)||L.test(o.href))&&(o.href="javascript:void(0)",o.target="_self",o.onclick=function(s){return s.preventDefault(),!1},c.current++,a(s=>s+1)))}),k.type==="attributes"&&k.target.nodeType===1){const o=k.target,O=k.attributeName;if(O==="href"||O==="src"){const I=o.getAttribute(O)||"";(P.test(I)||L.test(I))&&(console.log(`Blocked suspicious ${O}:`,I),o.setAttribute(O,"javascript:void(0)"),c.current++,a(R=>R+1))}}})}),Y.observe(n.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","id","class","src","href","script","type"]}))}catch(n){console.log("Cannot setup mutation observer:",n)}};g.current&&g.current.addEventListener("load",pe);const oe=(()=>{try{const n=document.querySelectorAll('.time-slider, .duration-150, .media-buffering\\:hidden, .-mt-0\\.5, [class*="controls"], [class*="player"], video, audio'),M=o=>(console.log("Intercepted navigation attempt"),o.preventDefault(),o.stopPropagation(),c.current++,a(O=>O+1),!1);window.addEventListener("beforeunload",M,!0),window.addEventListener("unload",M,!0);const k=o=>{if((()=>{var B,u,N,f,b,s,E,D,T,_,W,$;if(o.target.tagName==="VIDEO"||o.target.tagName==="AUDIO"||(B=o.target.className)!=null&&B.includes("play")||(u=o.target.className)!=null&&u.includes("pause")||(N=o.target.className)!=null&&N.includes("volume")||(f=o.target.className)!=null&&f.includes("fullscreen")||(b=o.target.className)!=null&&b.includes("time")||(s=o.target.className)!=null&&s.includes("progress"))return!0;const R=window.getComputedStyle(o.target);return!!(o.target.type==="range"||R.cursor==="pointer"&&((E=o.target.className)!=null&&E.includes("slider")||(T=(D=o.target.parentElement)==null?void 0:D.className)!=null&&T.includes("slider")||($=(W=(_=o.target.parentElement)==null?void 0:_.parentElement)==null?void 0:W.className)!=null&&$.includes("slider")))})()){const R=window.location.href;return setTimeout(()=>{window.location.href!==R&&(console.log("Navigation detected after player action, reverting"),history.back(),c.current++,a(B=>B+1))},200),!0}if(o.target.onclick||o.target.getAttribute("onclick")||o.target.href||o.target.getAttribute("href")||o.target.dataset.href)return console.log("Blocked suspicious click on player area element"),o.stopPropagation(),o.preventDefault(),c.current++,a(R=>R+1),!1};return n.forEach(o=>{o.addEventListener("click",k,!0),o.addEventListener("mousedown",k,!0),o.querySelectorAll("*").forEach(I=>{I.addEventListener("click",k,!0),I.addEventListener("mousedown",k,!0)})}),{cleanup:()=>{window.removeEventListener("beforeunload",M,!0),window.removeEventListener("unload",M,!0),n.forEach(o=>{o.removeEventListener("click",k,!0),o.removeEventListener("mousedown",k,!0),o.querySelectorAll("*").forEach(I=>{I.removeEventListener("click",k,!0),I.removeEventListener("mousedown",k,!0)})})}}}catch(n){return console.log("Error in protectPlayerControls:",n),{cleanup:()=>{}}}})();return()=>{d=!1,window.open=w.windowOpen,window.alert=w.alert,window.confirm=w.confirm,window.prompt=w.prompt,window.setInterval=w.setInterval,window.setTimeout=w.setTimeout,window.requestAnimationFrame=w.requestAnimationFrame,window.postMessage=w.postMessage,document.createElement=w.createElement,Element.prototype.appendChild=w.appendChild,Element.prototype.insertBefore=w.insertBefore,Element.prototype.setAttribute=w.setAttribute,r&&(e.removeEventListener("click",m,!0),e.removeEventListener("mousedown",m,!0),e.removeEventListener("mouseup",m,!0),e.removeEventListener("dblclick",m,!0),e.removeEventListener("contextmenu",m,!0),e.removeEventListener("auxclick",m,!0),e.removeEventListener("pointerdown",m,!0),r.contains(e)&&r.removeChild(e),r.contains(i)&&r.removeChild(i)),Y&&Y.disconnect(),g.current&&(g.current.removeEventListener("load",pe),g.current.removeEventListener("load",q)),clearTimeout(V.current),clearInterval(Ie),oe&&oe.cleanup&&oe.cleanup()}}},[G,F,te]),j.useEffect(()=>{if(!F||!ee)return;let d=window.location.href,x=0;const z=3,w=l=>popupPatterns.test(l)||blockedDomainsPattern.test(l)||l.indexOf("javascript:")===0||l.indexOf("data:")===0||l.indexOf("vbscript:")===0||l.indexOf("about:")===0||/\/\/(bit\.ly|goo\.gl|t\.co|tinyurl\.com)/.test(l)?(console.log("Blocked navigation attempt:",l),c.current++,a(r=>r+1),!0):!1,P=l=>{var r;const v=((r=document.activeElement)==null?void 0:r.href)||"";if(w(v)||x>=z)return l.preventDefault(),l.returnValue="",""},L=l=>{var h,p,m;let v=l.target,r="";for(let q=0;q<5&&v;q++){if(v.tagName==="A"){r=v.href||"";break}if(v.getAttribute("onclick")||v.onclick){const re=v.getAttribute("onclick")||v.onclick.toString();if(re.includes("window.open")||re.includes("location")){r="javascript:detected";break}}v=v.parentElement}const e=/absolute inset-0|video-layout_controls__rRx2z|drawer|IOarzRhPlPOverlay|znid|selectextShadowHost/i,i=l.target.tagName==="FORM"||l.target.getAttribute&&l.target.getAttribute("data-href")||((h=l.target.dataset)==null?void 0:h.url)||((p=l.target.dataset)==null?void 0:p.target)||((m=l.target.dataset)==null?void 0:m.link)||l.target.className&&e.test(l.target.className);(r||i)&&w(r)&&(x++,l.preventDefault(),l.stopPropagation(),l.stopImmediatePropagation())},A=history.pushState,S=history.replaceState;history.pushState=function(...l){var r;const v=((r=l[2])==null?void 0:r.toString())||"";if(!w(v))return A.apply(this,l)},history.replaceState=function(...l){var r;const v=((r=l[2])==null?void 0:r.toString())||"";if(!w(v))return S.apply(this,l)};try{const l=e=>popupPatterns.test(e)||blockedDomainsPattern.test(e),v=window.location.replace,r=new Proxy(window.location,{get:function(e,i){return i==="replace"?function(h){if(l(h.toString())){console.log("Blocked location.replace to:",h),c.current++,a(p=>p+1);return}return x++,v.call(e,h)}:e[i]}})}catch(l){console.log("Could not override location methods:",l)}window.addEventListener("beforeunload",P),document.addEventListener("click",L,!0),document.addEventListener("auxclick",L,!0),document.addEventListener("mousedown",L,!0),window.addEventListener("popstate",l=>{if(x>=z)return l.preventDefault(),l.stopPropagation(),history.pushState(null,"",d),console.log("Blocked excessive navigation attempts"),!1});const C=setInterval(()=>{x>0&&(x=Math.max(0,x-1))},5e3);return()=>{window.removeEventListener("beforeunload",P),document.removeEventListener("click",L,!0),document.removeEventListener("auxclick",L,!0),document.removeEventListener("mousedown",L,!0),history.pushState=A,history.replaceState=S;try{window.location.replace=originalLocationReplace}catch{}window.onbeforeunload=null,clearInterval(C)}},[F,ee]),j.useEffect(()=>{if(!F)return;const d=navigator.userAgent,x=navigator.appVersion,z=navigator.platform;try{Object.defineProperty(navigator,"userAgent",{get:function(){return d.replace(/Chrome\/[\d\.]+/,"Chrome/"+(Math.floor(Math.random()*5)+90)+".0.0.0")}}),Object.defineProperty(navigator,"appVersion",{get:function(){return x.replace(/[\d\.]+/,Math.floor(Math.random()*5)+90+".0.0.0")}});const w=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(P,L){const A=w.call(this,P,L);if(P==="2d"&&A){const S=A.canvas.toDataURL;A.canvas.toDataURL=function(l){if(document.referrer&&blockedDomainsPattern.test(document.referrer)){const v=A;v.fillStyle="rgba(255,255,255,0.001)",v.fillRect(0,0,1,1)}return S.apply(this,arguments)};const C=A.fillText;A.fillText=function(l,v,r,e){const i=Math.random()*.001,h=Math.random()*.001;return C.call(this,l,v+i,r+h,e)}}return A}}catch{console.log("Could not apply fingerprinting protection")}return()=>{try{Object.defineProperty(navigator,"userAgent",{get:()=>d}),Object.defineProperty(navigator,"appVersion",{get:()=>x}),Object.defineProperty(navigator,"platform",{get:()=>z}),HTMLCanvasElement.prototype.getContext=originalGetParameter}catch{}}},[F]),j.useEffect(()=>{if(!F||!g.current)return;let d=!0;const x=()=>{try{if(!g.current||!g.current.contentDocument)return;const w=P=>{var L;try{const A=P.contentDocument||((L=P.contentWindow)==null?void 0:L.document);if(!A)return;const S=A.querySelectorAll("iframe");S.length>0&&(console.log(`Found ${S.length} nested iframes`),S.forEach(C=>{try{C.setAttribute("referrerpolicy","no-referrer"),C.addEventListener("load",()=>{try{C.contentWindow&&(C.contentWindow.open=function(){return console.log("Nested iframe popup blocked"),c.current++,a(v=>v+1),null})}catch{}w(C)})}catch{}const l=C.src||"";(blockedDomainsPattern.test(l)||popupPatterns.test(l))&&(console.log("Blocked suspicious nested iframe:",l),C.src="about:blank",c.current++,a(v=>v+1))}))}catch{}};w(g.current)}catch(w){console.log("Error in iframe scanner:",w)}};x();const z=setInterval(()=>{d&&x()},2e3);return()=>{d=!1,clearInterval(z)}},[F]),j.useEffect(()=>{if(!F)return;let d=[],x=!0;const z=()=>{document.hidden?(x=!1,setTimeout(()=>{x||(console.log("Focus lost - potential popup detected"),window.focus())},500)):x=!0},w=()=>{for(let S=0;S<d.length;S++)try{d[S].closed||(d[S].close(),console.log("Closed detected popup window"),c.current++,a(C=>C+1))}catch{}d=d.filter(S=>{try{return!S.closed}catch{return!1}})};document.addEventListener("visibilitychange",z);const P=setInterval(w,1e3),L=window.open;let A=[];return window.open=function(...S){var v;const C=((v=S[0])==null?void 0:v.toString())||"";if(popupPatterns.test(C)||blockedDomainsPattern.test(C))return console.log("Blocked popup:",C),c.current++,a(r=>r+1),null;const l=L.apply(window,S);return l&&A.push(l),l},setInterval(()=>{A=A.filter(S=>!S.closed),A.forEach(S=>{try{if(S.closed)return;const C=S.location.href;blockedDomainsPattern.test(C)&&(S.close(),console.log("Closed malicious window:",C),c.current++,a(l=>l+1))}catch{}})},1e3),()=>{document.removeEventListener("visibilitychange",z),clearInterval(P),window.open=L}},[F]),j.useEffect(()=>{U&&(async()=>{try{Q(!0);const x=await ae(U,"movie");xe(x),Q(!1)}catch(x){console.error("Error fetching movie details:",x),Ee("Failed to load movie details"),Q(!1)}})()},[U,ae]),j.useEffect(()=>(window.onbeforeunload=null,window.scrollTo(0,0),()=>{window.onbeforeunload=null}),[]);const Ce=()=>{const d=le(U,"movie");de(d),ke(!0),a(0),window.onbeforeunload=null,setTimeout(()=>{ne.current&&ne.current.scrollIntoView({behavior:"smooth",block:"start"})},100)},Pe=()=>{window.onbeforeunload=null,ye(),window.addEventListener("beforeunload",d=>{d.currentTarget.location.href,window.location.href})},ue=d=>{const x=window.scrollY;if(be(d),a(0),ee){const z=le(U,"movie");de(z),setTimeout(()=>{window.scrollTo(0,x)},50)}},Ae=()=>{var x;Z(!1);const d=(x=X.current)==null?void 0:x.querySelector(".ad-overlay-blocker");d&&(d.style.display="none"),V.current&&clearTimeout(V.current)},Oe=()=>{const d=document.getElementById("Server2");d&&d.scrollIntoView({behavior:"smooth"})};return Ne?t.jsx(Re,{}):ce?t.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-24 px-4",children:t.jsxs("div",{className:"container mx-auto text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-red-500",children:ce}),t.jsx("p",{className:"mt-2 text-gray-400",children:"Unable to load movie information"})]})}):y?t.jsxs("div",{ref:Le,className:"min-h-screen bg-gray-900 text-white pb-16",children:[t.jsx(qe,{movie:y,onPlayClick:Oe}),t.jsx("div",{className:"container mx-auto px-4 mt-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2",children:[G&&t.jsxs("div",{ref:ne,className:"mb-8 bg-gray-800 rounded-lg overflow-hidden shadow-xl",children:[t.jsxs("div",{ref:X,className:"relative w-full pt-0",style:{paddingBottom:"56.25%",overflow:"hidden"},children:[t.jsx("iframe",{ref:g,src:G,className:"absolute top-0 left-0 w-full h-full",allowFullScreen:!0,title:y.title||y.name,onLoad:Pe,loading:"eager",importance:"high",referrerPolicy:"no-referrer",allow:"fullscreen",style:{border:"none"}}),we&&t.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center z-20",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Be,{className:"animate-spin h-10 w-10 text-blue-500 mx-auto"}),t.jsx("p",{className:"text-white mt-3",children:"Loading player..."})]})}),je&&t.jsx("div",{className:"absolute top-3 right-3 z-20",children:t.jsx("button",{onClick:Ae,className:"bg-gray-800 text-white p-1 rounded-full hover:bg-gray-700",children:t.jsx(Te,{size:18})})})]}),t.jsx("div",{className:"bg-gray-900 px-4 py-3",children:t.jsxs("div",{className:"flex flex-wrap justify-between items-center",children:[t.jsx("div",{className:"flex items-center",children:t.jsxs("p",{className:"text-sm text-gray-400",children:["Now Playing: ",y.title||y.name]})}),t.jsx("div",{className:"flex items-center mt-2 sm:mt-0",children:t.jsxs("p",{className:"text-sm text-gray-400",children:["Server:"," ",J==="server1"?"Server 1":"Server 2"]})})]})})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",id:"Server2",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h3",{className:"text-base font-medium flex items-center",children:[t.jsx(He,{size:16,className:"mr-2"}),"Select Server"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>ue("server1"),className:`py-1 px-3 text-center rounded-md text-sm transition-all ${J==="server1"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Server 1"}),t.jsx("button",{onClick:()=>ue("server2"),className:`py-1 px-3 text-center rounded-md text-sm transition-all ${J==="server2"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Server 2"})]})]}),t.jsxs("button",{onClick:Ce,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-md flex items-center justify-center text-base font-medium transition-all",children:[t.jsx(We,{size:18,className:"mr-2"}),"Watch Movie Now"]})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[t.jsx("h3",{className:"text-base font-medium mb-3",children:"Overview"}),t.jsx("p",{className:"text-gray-300 text-sm",children:y.overview||"No overview available."})]}),t.jsx(_e,{cast:(me=y.credits)==null?void 0:me.cast}),y.similar&&y.similar.results&&y.similar.results.length>0&&t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mt-6",children:[t.jsx("h3",{className:"text-lg font-medium mb-4",children:"Related Movies"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:y.similar.results.slice(0,10).map(d=>t.jsxs("a",{href:`/movie/${d.id}`,className:"block bg-gray-700 rounded-lg overflow-hidden hover:opacity-80 transition-opacity",children:[d.poster_path?t.jsx("img",{src:`https://image.tmdb.org/t/p/w300${d.poster_path}`,alt:d.title,className:"w-full h-auto",loading:"lazy"}):t.jsx("div",{className:"bg-gray-600 w-full pt-[150%] flex items-center justify-center",children:t.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})}),t.jsxs("div",{className:"p-3",children:[t.jsx("h4",{className:"text-sm font-medium truncate",children:d.title}),d.release_date&&t.jsx("p",{className:"text-gray-400 text-xs mt-1",children:d.release_date.split("-")[0]})]})]},d.id))})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[t.jsx("h3",{className:"text-base font-medium mb-3",children:"Movie Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[y.release_date&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Release Date:"}),t.jsx("span",{children:new Date(y.release_date).toLocaleDateString()})]}),y.runtime&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Runtime:"}),t.jsxs("span",{children:[Math.floor(y.runtime/60),"h ",y.runtime%60,"m"]})]}),y.vote_average&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Rating:"}),t.jsxs("span",{children:[y.vote_average.toFixed(1),"/10"]})]}),y.budget>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Budget:"}),t.jsxs("span",{children:["$",y.budget.toLocaleString()]})]}),y.revenue>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Revenue:"}),t.jsxs("span",{children:["$",y.revenue.toLocaleString()]})]}),y.original_language&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Language:"}),t.jsx("span",{children:y.original_language.toUpperCase()})]}),y.status&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Status:"}),t.jsx("span",{children:y.status})]})]})]}),y.production_companies&&y.production_companies.length>0&&t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[t.jsx("h3",{className:"text-base font-medium mb-3",children:"Production"}),t.jsx("div",{className:"space-y-2 text-sm",children:y.production_companies.map(d=>t.jsxs("div",{className:"flex items-center text-gray-300 py-1",children:[d.logo_path?t.jsx("img",{src:`https://image.tmdb.org/t/p/w92${d.logo_path}`,alt:d.name,className:"h-5 mr-2 object-contain"}):t.jsx(Fe,{size:16,className:"mr-2 text-gray-400"}),d.name]},d.id))})]}),y.genres&&y.genres.length>0&&t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[t.jsx("h3",{className:"text-base font-medium mb-3",children:"Genres"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:y.genres.map(d=>t.jsx("span",{className:"px-3 py-1 bg-blue-800/50 text-blue-100 border border-blue-700 rounded-full text-xs",children:d.name},d.id))})]})]})]})})]}):null};export{rt as default};
