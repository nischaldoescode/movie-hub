import{d as qe,b as He,u as $e,r as x,j as t,a as We,c as Ce,F as Ve}from"./main-F7ziLQoi.js";import{M as Ue,S as Ge,a as Ze}from"./MovieCast-Tcf_Q4GX.js";import{C as Ye}from"./star-BSpultc5.js";import{C as Ke}from"./chevron-down-GrT9Hr23.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Je=qe("list",Xe),ht=()=>{var be;const{id:$}=He(),{getMovieDetails:me,getStreamingUrl:pe,handlePlayerLoaded:Le,playerLoading:Pe,getTvShowSeasonDetails:fe,activeServer:J,switchServer:Ae,getSimilarMovies:Qe}=$e(),[N,Oe]=x.useState(null),[W,ge]=x.useState(1),[G,he]=x.useState(null),[ve,De]=x.useState(null),[Ie,Q]=x.useState(!0),[M,ze]=x.useState(null),[Y,ye]=x.useState(""),[we,ee]=x.useState(!1),[F,et]=x.useState(!0),[te,tt]=x.useState("high"),[nt,c]=x.useState(0),[rt,ne]=x.useState(!1),[re,ot]=x.useState(!1),[st,it]=x.useState(!1),[at,lt]=x.useState(!1),[ct,dt]=x.useState(!1),Te=x.useRef(null),d=x.useRef(0),oe=x.useRef(null),se=x.useRef(null),h=x.useRef(null),ie=x.useRef(null),Me=x.useRef(null),ae=x.useRef(null);x.useEffect(()=>{if(!Y||!F)return;let a=!0,g=0,T=0,w={};const P=/pop|click|redirect|offer|win|prize|free|bonus|ad|banner|track|survey|smart|clk|advert|campaign|campaign|IOarzRhPlPOverlay|modal|selectextShadowHos|shadow|znid|donto|popcash|display/i,S=/doubleclick|adservice|adnxs|adsystem|adsrvr|taboola|outbrain|revcontent|zedo|adroll|rubiconproject|openx|criteo|pubmatic|smartadserver|adtechus|quantserve|mediamath|turn|intellipopup|popcash|effectivemeasure/i,A=r=>{const e=r.src||"",i=r.textContent||"",v=i.includes("adserverDomain")||i.includes("qqsfafvkgsyto.online")||i.match(/\.online"/)||i.match(/[a-zA-Z0-9]{20,}\.(?:online|com|net|xyz|top|site|club|info|biz|link)/),p=i.match(/window\['[a-zA-Z0-9]{20,}'\]/)||i.match(/var [a-zA-Z0-9]{15,}/)||i.match(/let [a-zA-Z0-9]{15,}/)||i.match(/const [a-zA-Z0-9]{15,}/);return S.test(e)||P.test(e)||e.includes("popcash")||e.includes("intellipopup")||i.includes("znid")||i.includes("donto")||i.includes("IOarzRhPlP")||i.includes("popads-script")||i.includes("videoOverlay")||v||p||i.includes("x4G9Tq2Kw6R7v1Dy3P0B5N8Lc9M2zF")||i.match(/window\.open|popup|redirect|location\s*=|postMessage|_blank/i)};(()=>{w={windowOpen:window.open,alert:window.alert,confirm:window.confirm,prompt:window.prompt,createElement:document.createElement,appendChild:Element.prototype.appendChild,insertBefore:Element.prototype.insertBefore,setAttribute:Element.prototype.setAttribute,postMessage:window.postMessage,setInterval:window.setInterval,setTimeout:window.setTimeout,requestAnimationFrame:window.requestAnimationFrame}})(),window.open=function(...r){if(!r[0])return null;const e=r[0].toString();return r[1]&&r[1].includes("_blank")?(console.log("Blocked _blank target:",e),d.current++,c(v=>v+1),null):P.test(e)||S.test(e)||e.startsWith("javascript:")||e.startsWith("data:")||document.referrer&&P.test(document.referrer)?(console.log("Popup blocked:",e),d.current++,c(v=>v+1),null):(console.log("Popup blocked (default protection):",e),d.current++,c(v=>v+1),null)},window.alert=function(){return null},window.confirm=function(){return!1},window.prompt=function(){return null},window.setInterval=function(r,e,...i){return e<300&&(e=1e3),w.setInterval.call(window,r,e,...i)},window.setTimeout=function(r,e,...i){const v=r.toString().toLowerCase();return v.includes("window.open")||v.includes("location")||v.includes("popup")||v.includes("adv")?(console.log("Blocked suspicious timeout"),d.current++,c(p=>p+1),0):w.setTimeout.call(window,r,e,...i)},window.requestAnimationFrame=function(r){return w.requestAnimationFrame.call(window,r)};const L=document.createElement;document.createElement=function(r){const e=L.call(document,r);if(r.toLowerCase()==="iframe"&&setTimeout(()=>{try{e.setAttribute("referrerpolicy","no-referrer"),e.setAttribute("loading","lazy"),e.setAttribute("importance","low"),e.setAttribute("allowfullscreen","false"),e.setAttribute("allow","fullscreen; camera *; microphone *"),(()=>{e.addEventListener("load",function(){try{const p=e.src||"";(S.test(p)||P.test(p))&&(console.log("Blocked suspicious iframe load:",p),e.src="about:blank",d.current++,c(m=>m+1));try{e.contentWindow&&(e.contentWindow.open=function(){return console.log("Iframe popup blocked"),d.current++,c(m=>m+1),null},e.contentWindow.alert=function(){return null},e.contentWindow.confirm=function(){return!1},e.contentWindow.prompt=function(){return null},Object.defineProperty(e.contentWindow,"location",{get:function(){return window.location},set:function(m){return console.log("Blocked iframe location change to:",m),d.current++,c(q=>q+1),window.location}}))}catch{}}catch(p){console.log("Error in iframe load handler:",p)}})})();const v=e.setAttribute;e.setAttribute=function(p,m){if(p.toLowerCase()==="src"&&(S.test(m)||P.test(m))){console.log("Blocked suspicious iframe src:",m),d.current++,c(q=>q+1);return}return v.call(this,p,m)},console.log("Enhanced iframe security applied")}catch{console.log("Could not enhance iframe security")}},0),r.toLowerCase()==="script"){const i=e.setAttribute;e.setAttribute=function(p,m){if(p.toLowerCase()==="src"&&(S.test(m)||P.test(m))){console.log("Blocked script src attribute:",m),d.current++,c(q=>q+1);return}return i.call(this,p,m)};let v="";Object.defineProperty(e,"textContent",{get:function(){return v},set:function(p){if(p&&(p.includes("adserverDomain")||p.includes("qqsfafvkgsyto.online")||p.includes("x4G9Tq2Kw6R7v1Dy3P0B5N8Lc9M2zF")||p.match(/window\['[a-zA-Z0-9]{20,}'\]/))){console.log("Blocked suspicious script content"),d.current++,c(m=>m+1);return}v=p}}),Object.defineProperty(e,"innerHTML",{set:function(p){if(p&&(p.includes("adserverDomain")||p.includes("qqsfafvkgsyto.online")||p.includes("x4G9Tq2Kw6R7v1Dy3P0B5N8Lc9M2zF")||p.match(/window\['[a-zA-Z0-9]{20,}'\]/))){console.log("Blocked suspicious script innerHTML"),d.current++,c(m=>m+1);return}HTMLScriptElement.prototype.innerHTML=p}})}return e};const l=Element.prototype.appendChild;Element.prototype.appendChild=function(r){if(r.tagName==="IFRAME"){const e=r.src||"";if(S.test(e)||P.test(e))return console.log("Blocked suspicious iframe append:",e),d.current++,c(i=>i+1),r}if(r.tagName==="SCRIPT"){const e=r.textContent||"",i=r.src||"";if(e.match(/window\.open|popup|banner|redirect|location\s*=|postMessage/i)||S.test(i))return console.log("Blocked suspicious script append"),d.current++,c(v=>v+1),r}return l.call(this,r)};const y=Element.prototype.insertBefore;if(Element.prototype.insertBefore=function(r,e){if(r.tagName==="IFRAME"||r.tagName==="SCRIPT"){const i=r.src||"";if(S.test(i)||P.test(i))return console.log("Blocked suspicious element insertion:",i),d.current++,c(v=>v+1),r}return y.call(this,r,e)},window.postMessage=function(r,e,i){const v=typeof r=="string"?r:JSON.stringify(r);if(P.test(v)){console.log("Blocked suspicious postMessage:",e),d.current++,c(m=>m+1);return}const p=e||"*";return w.postMessage.call(window,r,p,i)},se.current){const r=se.current,e=document.createElement("div");e.className="popup-shield",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="9999",e.style.background="transparent",e.style.cursor="default",e.style.display="block",e.style.pointerEvents="auto",Te.current=e,r.appendChild(e);const i=document.createElement("div");i.className="ad-overlay-blocker",i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.zIndex="10000",i.style.background="rgba(0,0,0,0.9)",i.style.display="none",i.style.alignItems="center",i.style.justifyContent="center",i.style.flexDirection="column",i.innerHTML=`
        <div style="display: flex; align-items: center; margin-bottom: 16px;">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #f59e0b; margin-right: 8px;">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          <div style="color:white; font-size:16px; font-weight:500;">Popup/Ad Blocked</div>
        </div>
        <div style="color:#d1d5db; font-size:14px; margin-bottom:16px; max-width:80%; text-align:center;">
          Our system detected and blocked potentially harmful content from the video player
        </div>
        <button style="background:#3b82f6; color:white; border:none; padding:8px 20px; border-radius:4px; cursor:pointer; font-size:14px; font-weight:500; display:flex; align-items:center; justify-content:center;">
          <span style="margin-right:6px">Continue to Video</span>
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
        </button>
      `,r.appendChild(i);const v=()=>{if(!a)return;i.style.display="flex",ne(!0);const n=3e3+Math.random()*2e3;oe.current=setTimeout(()=>{a&&(i.style.display="none",ne(!1))},n)},p=i.querySelector("button");p&&p.addEventListener("click",()=>{i.style.display="none",ne(!1),clearTimeout(oe.current)});const m=n=>{var k,f,b,s,E,I,_,V,U,Z,X,ke,Ne,je,Se;if(!F)return!0;const z=Date.now(),j=["time-slider","duration-150","media-buffering","-mt-0.5"];let o=n.target,O=!1;for(let H=0;H<4&&o;H++){const de=((k=o.className)==null?void 0:k.toString())||"";if(O=j.some(ue=>de.includes(ue)),O){const ue=window.location.href;return setTimeout(()=>{window.location.href!==ue&&(console.log("Blocked redirect from player control"),window.history.back(),d.current++,c(Fe=>Fe+1))},100),!0}o=o.parentElement}if(!(te==="high"||te==="medium"&&n.type!=="mousemove"))return!0;if(g>0&&z-T<500+Math.random()*300)return n.stopPropagation(),n.preventDefault(),v(),d.current++,c(H=>H+1),g=0,!1;(n.type==="click"||n.type==="mousedown")&&(g++,setTimeout(()=>{g=0},2e3)),T=z;const R=n.target.tagName==="A"||n.target.tagName==="BUTTON"||n.target.tagName==="IMG"||n.target.onclick||n.target.hasAttribute("onclick")||n.target.hasAttribute("href")||n.target.hasAttribute("data-href")||n.target.hasAttribute("data-link")||n.isTrusted===!1||n.target.style.cursor==="pointer"||n.target.getAttribute("role")==="button"||((f=n.target.className)==null?void 0:f.includes("btn"))||((b=n.target.className)==null?void 0:b.includes("button"))||((s=n.target.className)==null?void 0:s.includes("ad"))||((E=n.target.className)==null?void 0:E.includes("video-layout_controls__rRx2z"))||((I=n.target.className)==null?void 0:I.includes("selectextShadowHost"))||((_=n.target.className)==null?void 0:_.includes("closeButton"))||((V=n.target.className)==null?void 0:V.includes("IOarzRhPlPOverlay"))||((U=n.target.className)==null?void 0:U.includes("absolute inset-0"))||((Z=n.target.id)==null?void 0:Z.includes("ad"))||((X=n.target.id)==null?void 0:X.includes("modal"))||((ke=n.target.id)==null?void 0:ke.includes("closeButton"))||((je=(Ne=n.target.parentElement)==null?void 0:Ne.className)==null?void 0:je.includes("ad"))||n.target.style.position==="absolute"&&(n.target.style.opacity==="0"||parseFloat(n.target.style.opacity)<.1)||n.clientX<5||n.clientX>window.innerWidth-5||n.clientY<5||n.clientY>window.innerHeight-5,B=H=>{const de=H.innerText||H.textContent||"";return P.test(de)},u=B(n.target)||B(n.target.parentElement)||B((Se=n.target.parentElement)==null?void 0:Se.parentElement);if(R||u)return n.stopPropagation(),n.preventDefault(),v(),d.current++,c(H=>H+1),!1};e.addEventListener("click",m,!0),e.addEventListener("mousedown",m,!0),e.addEventListener("mouseup",m,!0),e.addEventListener("dblclick",m,!0),e.addEventListener("contextmenu",m,!0),e.addEventListener("auxclick",m,!0),e.addEventListener("pointerdown",m,!0),e.addEventListener("click",n=>{if(n.target.tagName==="A"||n.target.closest("a"))return console.log("Blocked click on link in player area"),n.preventDefault(),n.stopPropagation(),d.current++,c(D=>D+1),!1;const j=n.clientX,o=n.clientY,O=window.location.href;setTimeout(()=>{window.location.href!==O&&(console.log("Detected redirect after click at",j,o),history.back(),d.current++,c(D=>D+1),v())},100)},!0);const q=()=>{try{if(!h.current)return;const n=()=>{try{if(!h.current||!h.current.contentDocument)return;const u=h.current.contentDocument,k=new MutationObserver(f=>{f.forEach(b=>{b.addedNodes&&b.addedNodes.length&&b.addedNodes.forEach(s=>{if(s.nodeType===1&&(s.className&&typeof s.className=="string"&&(s.className.includes("selectextShadowHost")||s.className.includes("IOarzRhPlPOverlay"))&&(s.remove(),d.current++,c(E=>E+1)),s.id==="videoOverlay"&&(s.remove(),d.current++,c(E=>E+1)),s.hasAttribute&&s.hasAttribute("znid")&&(s.remove(),d.current++,c(E=>E+1)),s.tagName==="SCRIPT")){const E=s.src||"",I=s.textContent||"";(E.includes("intellipopup")||I.includes("popup-ads")||I.includes("window.open")||I.includes("_blank")||I.includes("target=")||I.includes("location.href")||s.id&&s.id.includes("ads"))&&(s.remove(),d.current++,c(_=>_+1))}})})});return k.observe(u,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id","style","znid"]}),k}catch(u){return console.log("Error setting up DOM observer:",u),null}};let z=0;const j=()=>{try{if(!h.current.contentDocument)return;const u=document.createElement("meta");u.httpEquiv="Content-Security-Policy",u.content="default-src 'self' 'unsafe-inline' 'unsafe-eval' blob: data:; object-src 'none';";try{h.current.contentDocument.head.appendChild(u)}catch{console.log("Could not inject CSP")}const k=document.createElement("script");k.textContent=`
                (function() {
                  // Override window.open
                  window.open = function() { return null; };
                  
                  // Override dialog functions
                  window.alert = function() { return null; };
                  window.confirm = function() { return false; };
                  window.prompt = function() { return null; };
                  
                  // Prevent new windows
                  document.addEventListener('click', function(e) {
                    if (e.target.tagName === 'A' && e.target.target === '_blank') {
                      e.preventDefault();
                    }
                  }, true);
                  
                  // Monitor for dynamic iframe creation
                  const originalCreateElement = document.createElement;
                  document.createElement = function(tag) {
                    const el = originalCreateElement.call(document, tag);
                    if (tag.toLowerCase() === 'iframe') {
                      // Apply protection to new iframes
                      el.onload = function() {
                        try {
                          el.contentWindow.open = function() { return null; };
                        } catch(e) {}
                      };
                    }
                    return el;
                  };
                })();
              `;try{h.current.contentDocument.head.appendChild(k)}catch{console.log("Could not inject protection script")}}catch{console.log("Could not access iframe document")}};h.current.addEventListener("load",()=>{z++,console.log(`Frame load attempt ${z}`);try{const u=h.current.contentWindow;if(u){try{u.addEventListener("beforeunload",function(b){return console.log("Blocked navigation attempt via beforeunload"),d.current++,c(s=>s+1),b.preventDefault(),b.returnValue="",""}),u.addEventListener("hashchange",function(b){const s=u.location.hash;P.test(s)&&(console.log("Blocked suspicious hash navigation:",s),d.current++,c(E=>E+1),b.preventDefault())});const k=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){return console.log("Blocked form submission"),d.current++,c(b=>b+1),!1},new MutationObserver(b=>{b.forEach(s=>{s.addedNodes&&s.addedNodes.forEach(E=>{E.tagName==="FORM"&&E.addEventListener("submit",function(I){return console.log("Blocked form submit event"),I.preventDefault(),d.current++,c(_=>_+1),!1})})})}).observe(u.document,{childList:!0,subtree:!0})}catch(k){console.log("Could not add navigation event listeners:",k)}try{u.alert=function(){return null},u.confirm=function(){return!1},u.prompt=function(){return null}}catch{console.log("Could not override frame dialogs")}try{u.addEventListener("blur",function(k){console.log("Frame blur detected - potential popunder"),u.focus(),d.current++,c(f=>f+1)})}catch{console.log("Could not add blur listener")}}j()}catch(u){console.log("Protected frame access error:",u)}if(z>3){console.log("Excessive frame reloads detected - freezing iframe");try{h.current.src="about:blank"}catch{}}});const o=new MutationObserver(u=>{u.forEach(k=>{k.attributeName==="src"&&console.log("iframe src changed")})}),D=setInterval(()=>{try{if(!h.current||!h.current.contentDocument)return;const u=h.current.contentDocument,k=f=>{const b=u.getElementsByClassName(f);if(b&&b.length)for(let s=0;s<b.length;s++)b[s].remove(),d.current++,c(E=>E+1);try{const s=u.querySelectorAll(`.${f}, #${f}, [class*="${f}"], [id*="${f}"], 
                     [class^="${f}"], [id^="${f}"], [class$="${f}"], [id$="${f}"]`);s&&s.length&&s.forEach(E=>{E.remove(),d.current++,c(I=>I+1)})}catch(s){console.log(`Error with querySelector for ${f}:`,s)}};try{const f=u.querySelectorAll('[znid], [donto], [style*="z-index:"], [style*="position: absolute"][style*="z-index"], .selectextShadowHost, .IOarzRhPlPOverlay, #videoOverlay, [class*="selectextShadowHost"], [class*="IOarzRhPlPOverlay"], [id="videoOverlay"], [id*="videoOverlay"]');f&&f.length&&f.forEach(s=>{s.remove(),d.current++,c(E=>E+1)});const b=u.querySelectorAll('script[src*="intellipopup"], script[src*="popup"], script[src*="ad"], script[id*="ad"], script[class*="ad"], script[id*="popup-ads"], script[type="text/javascript"][id*="ad"], script[src*="popcash"]');b&&b.length&&b.forEach(s=>{s.remove(),d.current++,c(E=>E+1)})}catch(f){console.log("Error removing znid elements:",f)}k("IOarzRhPlPOverlay"),k("selectextShadowHost"),k("intellipopup"),k("videoOverlay");try{u.querySelectorAll("*").forEach(b=>{b.shadowRoot&&b.shadowRoot.querySelectorAll(".selectextShadowHost, .IOarzRhPlPOverlay, #videoOverlay").forEach(E=>{E.remove(),d.current++,c(I=>I+1)})})}catch(f){console.log("Shadow DOM cleaning error:",f)}}catch(u){console.log("Error removing known bad elements:",u)}},200);clearInterval(D),o.observe(h.current,{attributes:!0});const B=setInterval(()=>{try{if(!h.current||!h.current.contentDocument)return;const u=h.current.contentDocument,k=['div[style*="position:fixed"][style*="z-index:9999"]','div[style*="position: fixed"][style*="z-index: 9999"]','div[style*="position:absolute"][style*="z-index:9999"]','div[style*="position: absolute"][style*="z-index: 9999"]','div[style*="position:fixed"][style*="inset:"]','div[style*="position: fixed"][style*="inset:"]','div[style*="position:fixed"][style*="top:"][style*="left:"][style*="right:"][style*="bottom:"]','div[style*="position: fixed"][style*="top:"][style*="left:"][style*="right:"][style*="bottom:"]','div[style*="pointer-events:none"]','div[style*="pointer-events: none"]','div[style*="opacity:0"]','div[style*="opacity: 0"]'],f=u.querySelectorAll(k.join(","));f&&f.length&&f.forEach(s=>{console.log("Removing invisible overlay:",s),s.remove(),d.current++,c(E=>E+1)}),u.querySelectorAll("div").forEach(s=>{const I=window.getComputedStyle(s).position;if(I==="fixed"||I==="absolute"){const _=s.getBoundingClientRect(),V=window.innerWidth,U=window.innerHeight;_.width>V*.5&&_.height>U*.5&&(s.innerText.trim().length>0||s.querySelectorAll("img, video, svg").length>0||(console.log("Removing large overlay div:",s),s.remove(),d.current++,c(X=>X+1)))}})}catch(u){console.log("Error removing invisible overlays:",u)}},300);clearInterval(B)}catch(n){console.log("Could not enhance iframe:",n)}},_e=setInterval(()=>{try{if(!h.current||!h.current.contentDocument)return;const n=h.current.contentDocument,z=['[class*="intellipopup"]','[class*="IOarzRhPlPOverlay"]','[class*="selectextShadowHos"]','[class*="shadow"]',"[znid]","[donto]",'div[style*="position: absolute"][style*="z-index"]','iframe[style*="position: absolute"]','script[src*="popcash"]'],j=n.querySelectorAll(z.join(","));j&&j.length&&j.forEach(o=>{o.remove(),d.current++,c(O=>O+1)})}catch(n){console.log("Error in scanForProblematicElements:",n)}},200);q();let K=null;h.current&&h.current.addEventListener("load",()=>{observeDOM()});const Ee=()=>{try{if(!h.current||!h.current.contentWindow)return;let n=null;try{n=h.current.contentDocument||h.current.contentWindow.document}catch{console.log("Cannot access iframe content directly")}n&&(K=new MutationObserver(z=>{z.forEach(j=>{if(j.type==="childList"&&j.addedNodes.length&&j.addedNodes.forEach(o=>{var O,D,R,B,u,k,f;o.nodeType===1&&(((O=o.id)!=null&&O.toLowerCase().match(/ad|popup|overlay|banner|float|promo|sponsor|offer|selectextShadowHost|interstitial|closeButton|IOarzRhPlPOverlay/i)||(D=o.className)!=null&&D.toLowerCase().match(/ad|popup|overlay|banner|float|promo|sponsor|offer|selectextShadowHost|closeButton|interstitial|IOarzRhPlPOverlay/i)||((R=o.style)==null?void 0:R.zIndex)>100||((B=o.style)==null?void 0:B.position)==="fixed"||((u=o.style)==null?void 0:u.position)==="absolute"||((k=o.style)==null?void 0:k.width)==="100%"&&((f=o.style)==null?void 0:f.height)==="100%"||o.tagName==="IFRAME")&&(o.remove(),d.current++,c(s=>s+1)),o.tagName==="SCRIPT"&&A(o)&&(o.remove(),d.current++,c(s=>s+1)),o.tagName==="A"&&(o.target==="_blank"||P.test(o.href)||S.test(o.href))&&(o.href="javascript:void(0)",o.target="_self",o.onclick=function(s){return s.preventDefault(),!1},d.current++,c(s=>s+1)))}),j.type==="attributes"&&j.target.nodeType===1){const o=j.target,O=j.attributeName;if(O==="href"||O==="src"){const D=o.getAttribute(O)||"";(P.test(D)||S.test(D))&&(console.log(`Blocked suspicious ${O}:`,D),o.setAttribute(O,"javascript:void(0)"),d.current++,c(R=>R+1))}}})}),K.observe(n.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","id","class","src","href","script","type"]}))}catch(n){console.log("Cannot setup mutation observer:",n)}};h.current&&h.current.addEventListener("load",Ee);const ce=(()=>{try{const n=document.querySelectorAll('.time-slider, .duration-150, .media-buffering\\:hidden, .-mt-0\\.5, [class*="controls"], [class*="player"], video, audio'),z=o=>(console.log("Intercepted navigation attempt"),o.preventDefault(),o.stopPropagation(),d.current++,c(O=>O+1),!1);window.addEventListener("beforeunload",z,!0),window.addEventListener("unload",z,!0);const j=o=>{if((()=>{var B,u,k,f,b,s,E,I,_,V,U,Z;if(o.target.tagName==="VIDEO"||o.target.tagName==="AUDIO"||(B=o.target.className)!=null&&B.includes("play")||(u=o.target.className)!=null&&u.includes("pause")||(k=o.target.className)!=null&&k.includes("volume")||(f=o.target.className)!=null&&f.includes("fullscreen")||(b=o.target.className)!=null&&b.includes("time")||(s=o.target.className)!=null&&s.includes("progress"))return!0;const R=window.getComputedStyle(o.target);return!!(o.target.type==="range"||R.cursor==="pointer"&&((E=o.target.className)!=null&&E.includes("slider")||(_=(I=o.target.parentElement)==null?void 0:I.className)!=null&&_.includes("slider")||(Z=(U=(V=o.target.parentElement)==null?void 0:V.parentElement)==null?void 0:U.className)!=null&&Z.includes("slider")))})()){const R=window.location.href;return setTimeout(()=>{window.location.href!==R&&(console.log("Navigation detected after player action, reverting"),history.back(),d.current++,c(B=>B+1))},200),!0}if(o.target.onclick||o.target.getAttribute("onclick")||o.target.href||o.target.getAttribute("href")||o.target.dataset.href)return console.log("Blocked suspicious click on player area element"),o.stopPropagation(),o.preventDefault(),d.current++,c(R=>R+1),!1};return n.forEach(o=>{o.addEventListener("click",j,!0),o.addEventListener("mousedown",j,!0),o.querySelectorAll("*").forEach(D=>{D.addEventListener("click",j,!0),D.addEventListener("mousedown",j,!0)})}),{cleanup:()=>{window.removeEventListener("beforeunload",z,!0),window.removeEventListener("unload",z,!0),n.forEach(o=>{o.removeEventListener("click",j,!0),o.removeEventListener("mousedown",j,!0),o.querySelectorAll("*").forEach(D=>{D.removeEventListener("click",j,!0),D.removeEventListener("mousedown",j,!0)})})}}}catch(n){return console.log("Error in protectPlayerControls:",n),{cleanup:()=>{}}}})();return()=>{a=!1,window.open=w.windowOpen,window.alert=w.alert,window.confirm=w.confirm,window.prompt=w.prompt,window.setInterval=w.setInterval,window.setTimeout=w.setTimeout,window.requestAnimationFrame=w.requestAnimationFrame,window.postMessage=w.postMessage,document.createElement=w.createElement,Element.prototype.appendChild=w.appendChild,Element.prototype.insertBefore=w.insertBefore,Element.prototype.setAttribute=w.setAttribute,r&&(e.removeEventListener("click",m,!0),e.removeEventListener("mousedown",m,!0),e.removeEventListener("mouseup",m,!0),e.removeEventListener("dblclick",m,!0),e.removeEventListener("contextmenu",m,!0),e.removeEventListener("auxclick",m,!0),e.removeEventListener("pointerdown",m,!0),r.contains(e)&&r.removeChild(e),r.contains(i)&&r.removeChild(i)),K&&K.disconnect(),h.current&&(h.current.removeEventListener("load",Ee),h.current.removeEventListener("load",q)),clearTimeout(oe.current),clearInterval(_e),ce&&ce.cleanup&&ce.cleanup()}}},[Y,F,te]),x.useEffect(()=>{if(!F||!re)return;let a=window.location.href,g=0;const T=3,w=l=>popupPatterns.test(l)||blockedDomainsPattern.test(l)||l.indexOf("javascript:")===0||l.indexOf("data:")===0||l.indexOf("vbscript:")===0||l.indexOf("about:")===0||/\/\/(bit\.ly|goo\.gl|t\.co|tinyurl\.com)/.test(l)?(console.log("Blocked navigation attempt:",l),d.current++,c(r=>r+1),!0):!1,P=l=>{var r;const y=((r=document.activeElement)==null?void 0:r.href)||"";if(w(y)||g>=T)return l.preventDefault(),l.returnValue="",""},S=l=>{var v,p,m;let y=l.target,r="";for(let q=0;q<5&&y;q++){if(y.tagName==="A"){r=y.href||"";break}if(y.getAttribute("onclick")||y.onclick){const le=y.getAttribute("onclick")||y.onclick.toString();if(le.includes("window.open")||le.includes("location")){r="javascript:detected";break}}y=y.parentElement}const e=/absolute inset-0|video-layout_controls__rRx2z|drawer|IOarzRhPlPOverlay|znid|selectextShadowHost/i,i=l.target.tagName==="FORM"||l.target.getAttribute&&l.target.getAttribute("data-href")||((v=l.target.dataset)==null?void 0:v.url)||((p=l.target.dataset)==null?void 0:p.target)||((m=l.target.dataset)==null?void 0:m.link)||l.target.className&&e.test(l.target.className);(r||i)&&w(r)&&(g++,l.preventDefault(),l.stopPropagation(),l.stopImmediatePropagation())},A=history.pushState,C=history.replaceState;history.pushState=function(...l){var r;const y=((r=l[2])==null?void 0:r.toString())||"";if(!w(y))return A.apply(this,l)},history.replaceState=function(...l){var r;const y=((r=l[2])==null?void 0:r.toString())||"";if(!w(y))return C.apply(this,l)};try{const l=e=>popupPatterns.test(e)||blockedDomainsPattern.test(e),y=window.location.replace,r=new Proxy(window.location,{get:function(e,i){return i==="replace"?function(v){if(l(v.toString())){console.log("Blocked location.replace to:",v),d.current++,c(p=>p+1);return}return g++,y.call(e,v)}:e[i]}})}catch(l){console.log("Could not override location methods:",l)}window.addEventListener("beforeunload",P),document.addEventListener("click",S,!0),document.addEventListener("auxclick",S,!0),document.addEventListener("mousedown",S,!0),window.addEventListener("popstate",l=>{if(g>=T)return l.preventDefault(),l.stopPropagation(),history.pushState(null,"",a),console.log("Blocked excessive navigation attempts"),!1});const L=setInterval(()=>{g>0&&(g=Math.max(0,g-1))},5e3);return()=>{window.removeEventListener("beforeunload",P),document.removeEventListener("click",S,!0),document.removeEventListener("auxclick",S,!0),document.removeEventListener("mousedown",S,!0),history.pushState=A,history.replaceState=C;try{window.location.replace=originalLocationReplace}catch{}window.onbeforeunload=null,clearInterval(L)}},[F,re]),x.useEffect(()=>{if(!F)return;const a=navigator.userAgent,g=navigator.appVersion,T=navigator.platform;try{Object.defineProperty(navigator,"userAgent",{get:function(){return a.replace(/Chrome\/[\d\.]+/,"Chrome/"+(Math.floor(Math.random()*5)+90)+".0.0.0")}}),Object.defineProperty(navigator,"appVersion",{get:function(){return g.replace(/[\d\.]+/,Math.floor(Math.random()*5)+90+".0.0.0")}});const w=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(P,S){const A=w.call(this,P,S);if(P==="2d"&&A){const C=A.canvas.toDataURL;A.canvas.toDataURL=function(l){if(document.referrer&&blockedDomainsPattern.test(document.referrer)){const y=A;y.fillStyle="rgba(255,255,255,0.001)",y.fillRect(0,0,1,1)}return C.apply(this,arguments)};const L=A.fillText;A.fillText=function(l,y,r,e){const i=Math.random()*.001,v=Math.random()*.001;return L.call(this,l,y+i,r+v,e)}}return A}}catch{console.log("Could not apply fingerprinting protection")}return()=>{try{Object.defineProperty(navigator,"userAgent",{get:()=>a}),Object.defineProperty(navigator,"appVersion",{get:()=>g}),Object.defineProperty(navigator,"platform",{get:()=>T}),HTMLCanvasElement.prototype.getContext=originalGetParameter}catch{}}},[F]),x.useEffect(()=>{if(!F||!h.current)return;let a=!0;const g=()=>{try{if(!h.current||!h.current.contentDocument)return;const w=P=>{var S;try{const A=P.contentDocument||((S=P.contentWindow)==null?void 0:S.document);if(!A)return;const C=A.querySelectorAll("iframe");C.length>0&&(console.log(`Found ${C.length} nested iframes`),C.forEach(L=>{try{L.setAttribute("referrerpolicy","no-referrer"),L.addEventListener("load",()=>{try{L.contentWindow&&(L.contentWindow.open=function(){return console.log("Nested iframe popup blocked"),d.current++,c(y=>y+1),null})}catch{}w(L)})}catch{}const l=L.src||"";(blockedDomainsPattern.test(l)||popupPatterns.test(l))&&(console.log("Blocked suspicious nested iframe:",l),L.src="about:blank",d.current++,c(y=>y+1))}))}catch{}};w(h.current)}catch(w){console.log("Error in iframe scanner:",w)}};g();const T=setInterval(()=>{a&&g()},2e3);return()=>{a=!1,clearInterval(T)}},[F]),x.useEffect(()=>{if(!F)return;let a=[],g=!0;const T=()=>{document.hidden?(g=!1,setTimeout(()=>{g||(console.log("Focus lost - potential popup detected"),window.focus())},500)):g=!0},w=()=>{for(let C=0;C<a.length;C++)try{a[C].closed||(a[C].close(),console.log("Closed detected popup window"),d.current++,c(L=>L+1))}catch{}a=a.filter(C=>{try{return!C.closed}catch{return!1}})};document.addEventListener("visibilitychange",T);const P=setInterval(w,1e3),S=window.open;let A=[];return window.open=function(...C){var y;const L=((y=C[0])==null?void 0:y.toString())||"";if(popupPatterns.test(L)||blockedDomainsPattern.test(L))return console.log("Blocked popup:",L),d.current++,c(r=>r+1),null;const l=S.apply(window,C);return l&&A.push(l),l},setInterval(()=>{A=A.filter(C=>!C.closed),A.forEach(C=>{try{if(C.closed)return;const L=C.location.href;blockedDomainsPattern.test(L)&&(C.close(),console.log("Closed malicious window:",L),d.current++,c(l=>l+1))}catch{}})},1e3),()=>{document.removeEventListener("visibilitychange",T),clearInterval(P),window.open=S}},[F]),x.useEffect(()=>{$&&(async()=>{try{Q(!0),window.scrollTo(0,0);const g=await me($,"tv");Oe(g),ge(1),Q(!1)}catch(g){console.error("Error fetching TV show details:",g),De("Failed to load TV show details"),Q(!1)}})()},[$,me]),x.useEffect(()=>(window.onbeforeunload=null,window.scrollTo(0,0),()=>{window.onbeforeunload=null}),[]),x.useEffect(()=>{const a=g=>{ae.current&&!ae.current.contains(g.target)&&ee(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]),x.useEffect(()=>{(async()=>{if(N&&W)try{he(null);const g=await fe($,W);he(g)}catch(g){console.error("Error fetching season details:",g)}})()},[$,W,N,fe]);const Re=(a,g)=>{const T=pe($,"tv",a,g);ye(T),ze({season:a,episode:g}),setTimeout(()=>{ie.current&&ie.current.scrollIntoView({behavior:"smooth",block:"start"})},100)},xe=a=>{const g=window.scrollY;if(Ae(a),c(0),re){const T=pe($,"movie");ye(T),setTimeout(()=>{window.scrollTo(0,g)},50)}},Be=()=>{const a=document.getElementById("Sesslc");a&&a.scrollIntoView({behavior:"smooth"})};return Ie?t.jsx(We,{}):ve?t.jsx("div",{className:"min-h-screen bg-gray-900 text-white pt-24 px-4",children:t.jsxs("div",{className:"container mx-auto text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-red-500",children:ve}),t.jsx("p",{className:"mt-2 text-gray-400",children:"Unable to load TV show information"})]})}):N?t.jsxs("div",{ref:Me,className:"min-h-screen bg-gray-900 text-white pb-16",children:[t.jsx(Ue,{movie:N,onPlayClick:Be,mediaType:"tv"}),t.jsx("div",{className:"container mx-auto px-4 mt-8",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2",children:[Y&&M&&t.jsxs("div",{ref:ie,className:"mb-8 bg-gray-800 rounded-lg overflow-hidden shadow-xl",children:[t.jsxs("div",{ref:se,className:"relative w-full pt-0",style:{paddingBottom:"56.25%"},children:[t.jsx("iframe",{ref:h,src:Y,className:"absolute top-0 left-0 w-full h-full",allowFullScreen:!0,title:`${N.name} - Season ${M==null?void 0:M.season}, Episode ${M==null?void 0:M.episode}`,onLoad:Le,loading:"eager",importance:"high",referrerPolicy:"no-referrer-when-downgrade",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}),Pe&&t.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ce,{className:"animate-spin h-10 w-10 text-blue-500 mx-auto"}),t.jsx("p",{className:"text-white mt-3",children:"Loading player..."})]})})]}),M&&t.jsx("div",{className:"bg-gray-900 px-4 py-3",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("p",{className:"text-sm text-gray-400",children:["Now Playing: Season ",M.season,", Episode"," ",M.episode]}),t.jsxs("p",{className:"text-sm text-gray-400",children:["Server:"," ",J==="server1"?"Server 1":"Server 2"]})]})})]}),t.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("h3",{className:"text-base font-medium flex items-center",children:[t.jsx(Ge,{size:16,className:"mr-2"}),"Select Server"]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:()=>xe("server1"),className:`py-1 px-3 text-center rounded-md text-sm transition-all ${J==="server1"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Server 1"}),t.jsx("button",{onClick:()=>xe("server2"),className:`py-1 px-3 text-center rounded-md text-sm transition-all ${J==="server2"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Server 2"})]})]})}),t.jsxs("div",{className:"mb-6 bg-gray-800 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h3",{className:"text-base font-medium flex items-center",children:[t.jsx(Ye,{size:16,className:"mr-2"}),"Season"]}),t.jsxs("div",{className:"relative",id:"Sesslc",ref:ae,children:[t.jsxs("button",{onClick:()=>ee(!we),className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-md flex items-center justify-between min-w-32",children:[t.jsxs("span",{children:["Season ",W]}),t.jsx(Ke,{size:16,className:"ml-2"})]}),we&&t.jsx("div",{className:"absolute right-0 mt-1 w-full bg-gray-800 border border-gray-700 rounded-md shadow-lg z-10 max-h-64 overflow-y-auto",children:N.seasons.filter(a=>a.season_number>0).map(a=>t.jsxs("button",{onClick:()=>{ge(a.season_number),ee(!1)},className:`w-full text-left px-4 py-2 hover:bg-gray-700 ${W===a.season_number?"bg-blue-600":""}`,children:["Season ",a.season_number]},a.id))})]})]}),t.jsxs("div",{children:[t.jsxs("h3",{className:"text-base font-medium mb-3 flex items-center",children:[t.jsx(Ve,{size:16,className:"mr-2"}),"Episodes"]}),!G&&t.jsx("div",{className:"flex justify-center p-4",children:t.jsx(Ce,{className:"animate-spin h-6 w-6 text-blue-500"})}),G&&G.episodes&&G.episodes.length>0?t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:G.episodes.map(a=>t.jsx("button",{onClick:()=>Re(W,a.episode_number),className:`p-2 rounded-md transition-all text-left ${M&&M.season===W&&M.episode===a.episode_number?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-xs font-medium bg-gray-800 rounded-full px-2 py-1 mr-2",children:a.episode_number}),t.jsx("span",{className:"text-sm truncate flex-1",children:a.name})]})},a.id))}):G&&t.jsx("div",{className:"bg-gray-700 p-3 rounded-md text-center",children:t.jsx("p",{className:"text-gray-400 text-sm",children:"No episodes available."})})]})]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[t.jsx("h3",{className:"text-base font-medium mb-3",children:"Overview"}),t.jsx("p",{className:"text-gray-300 text-sm",children:N.overview||"No overview available."})]}),t.jsx(Ze,{cast:(be=N.credits)==null?void 0:be.cast}),N.similar&&N.similar.results&&N.similar.results.length>0&&t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6 mt-4",children:[t.jsx("h3",{className:"text-base font-medium mb-3",children:"Related TV Shows"}),t.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:N.similar.results.slice(0,8).map(a=>t.jsxs("a",{href:`/tv/${a.id}`,className:"block bg-gray-700 rounded-lg overflow-hidden hover:opacity-80 transition-opacity",children:[a.poster_path?t.jsx("img",{src:`https://image.tmdb.org/t/p/w300${a.poster_path}`,alt:a.name,className:"w-full h-auto",loading:"lazy"}):t.jsx("div",{className:"bg-gray-600 w-full pt-[150%] flex items-center justify-center",children:t.jsx("span",{className:"text-gray-400 text-xs",children:"No Image"})}),t.jsxs("div",{className:"p-2",children:[t.jsx("h4",{className:"text-xs font-medium truncate",children:a.name}),a.first_air_date&&t.jsx("p",{className:"text-gray-400 text-xs",children:a.first_air_date.split("-")[0]})]})]},a.id))})]})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[t.jsx("h3",{className:"text-base font-medium mb-3",children:"Show Information"}),t.jsxs("div",{className:"space-y-2 text-sm",children:[N.first_air_date&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"First aired:"}),t.jsx("span",{children:new Date(N.first_air_date).toLocaleDateString()})]}),N.status&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Status:"}),t.jsx("span",{children:N.status})]}),N.number_of_seasons&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Seasons:"}),t.jsx("span",{children:N.number_of_seasons})]}),N.number_of_episodes&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Episodes:"}),t.jsx("span",{children:N.number_of_episodes})]}),N.networks&&N.networks.length>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Network:"}),t.jsx("span",{children:N.networks.map(a=>a.name).join(", ")})]}),N.original_language&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-gray-400",children:"Language:"}),t.jsx("span",{children:N.original_language.toUpperCase()})]})]})]}),N.genres&&N.genres.length>0&&t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:[t.jsxs("h3",{className:"text-base font-medium mb-3 flex items-center",children:[t.jsx(Je,{size:16,className:"mr-2"}),"Genres"]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:N.genres.map(a=>t.jsx("span",{className:"px-2 py-1 bg-gray-700 text-gray-300 rounded-full text-xs",children:a.name},a.id))})]})]})]})})]}):null};export{ht as default};
