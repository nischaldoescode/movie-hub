import{g as A,u as L,r as l,j as e,S as j,X as D,F as G,T as W,a as X}from"./main-F7ziLQoi.js";import{M as B}from"./MovieGrid-CLBAFS1P.js";import{C as F,P as H}from"./Pagination-DQB3PF0B.js";import"./star-BSpultc5.js";const U=()=>{const[r,n]=A(),{searchMovies:m}=L(),s=r.get("query")||r.get("q")||"",i=r.get("page"),[c,T]=l.useState([]),[d,h]=l.useState(!0),[u,C]=l.useState(null),[g,b]=l.useState(i?parseInt(i):1),[P,R]=l.useState(0),[v,z]=l.useState(0),[a,E]=l.useState(r.get("filter")||"all"),[x,y]=l.useState(s),[N,S]=l.useState("");l.useEffect(()=>{(async()=>{if(!s){T([]),h(!1);return}try{h(!0),C(null);const o=await m(s,g);if(o.results.length===0&&g>1){b(1),n({query:s,filter:a,page:1});return}T(o.results);const I=Math.ceil(o.total_results/20),q=o.total_results>0?Math.max(1,I):0;R(Math.min(q,o.total_pages)),z(o.total_results),h(!1)}catch{C("Failed to load search results. Please try again."),h(!1)}})()},[s,g,m,a,n]),l.useEffect(()=>{y(s)},[s]);const V=t=>{t>0&&t<=P&&(b(t),n({query:s,filter:a,page:t.toString()}),window.scrollTo(0,0))},p=t=>{E(t),b(1),n({query:s,filter:t,page:"1"})},k=t=>{y(t.target.value),N&&S("")},_=t=>{if(t.preventDefault(),!x||x.trim()===""){S("Please enter a search term");return}b(1),n({query:x.trim(),filter:a,page:"1"})},$=()=>{y(""),S("")},f=c.filter(t=>a==="all"?!0:t.media_type===a),M=a==="all"?P:Math.ceil(f.length/20)||0;return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-4 flex items-center mt-8",children:[e.jsx(j,{className:"mr-3 text-blue-400",size:28}),s?`Results for "${s}"`:"Search Movies & TV Shows"]}),e.jsxs("form",{onSubmit:_,className:"mb-6 mt-4",children:[e.jsxs("div",{className:"relative max-w-xl",children:[e.jsx("input",{type:"text",placeholder:"Search movies & TV shows...",value:x,onChange:k,className:`w-full bg-gray-800 text-white placeholder-gray-400 rounded-xl py-3 pl-12 pr-12\r
                  focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-lg`,"aria-label":"Search movies and TV shows"}),e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:e.jsx(j,{size:20,className:"text-blue-400"})}),x&&e.jsx("button",{type:"button",onClick:$,className:"absolute inset-y-0 right-12 pr-2 flex items-center text-gray-400 hover:text-white transition-colors","aria-label":"Clear search",children:e.jsx(D,{size:18})}),e.jsx("button",{type:"submit",className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:e.jsx("div",{className:"bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded-full text-white text-sm transition-colors",children:"Search"})})]}),N&&e.jsx("p",{className:"text-red-400 text-sm mt-2",children:N})]}),!d&&!u&&e.jsx("p",{className:"text-gray-400",children:v>0?e.jsxs(e.Fragment,{children:["Found ",v," ",v===1?"result":"results"]}):s?"No results found":"Enter a search term above to find movies and TV shows"})]}),!d&&!u&&c.length>0&&e.jsx("div",{className:"mb-6 border-b border-gray-800",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(w,{active:a==="all",onClick:()=>p("all"),icon:e.jsx(j,{size:16}),label:"All",count:c.length}),e.jsx(w,{active:a==="movie",onClick:()=>p("movie"),icon:e.jsx(G,{size:16}),label:"Movies",count:c.filter(t=>t.media_type==="movie").length}),e.jsx(w,{active:a==="tv",onClick:()=>p("tv"),icon:e.jsx(W,{size:16}),label:"TV Shows",count:c.filter(t=>t.media_type==="tv").length})]})}),d&&e.jsx("div",{className:"flex justify-center items-center min-h-64",children:e.jsx(X,{})}),u&&!d&&e.jsxs("div",{className:"text-center py-16 bg-red-900/20 rounded-xl",children:[e.jsx(F,{className:"mx-auto text-red-400 mb-4",size:40}),e.jsx("p",{className:"text-red-400 text-lg font-medium",children:u}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-full text-white",children:"Try Again"})]}),!d&&!u&&e.jsxs(e.Fragment,{children:[f.length>0?e.jsx(B,{movies:f}):s?e.jsxs("div",{className:"text-center py-16 bg-gray-800/30 rounded-xl",children:[e.jsx(F,{className:"mx-auto text-yellow-400 mb-4",size:40}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No results found"}),e.jsx("p",{className:"text-gray-400 mb-4",children:a!=="all"?`No ${a==="movie"?"movies":a==="tv"?"TV shows":"people"} found matching "${s}".`:`We couldn't find anything matching "${s}". Try different keywords.`}),a!=="all"&&e.jsx("button",{onClick:()=>p("all"),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-full text-white",children:"Show All Results"})]}):e.jsxs("div",{className:"text-center py-16 bg-gray-800/30 rounded-xl",children:[e.jsx(j,{className:"mx-auto text-gray-500 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Search for movies and TV shows"}),e.jsx("p",{className:"text-gray-400",children:"Enter a search term in the search bar above to find movies and TV shows."})]}),M>1&&f.length>0?e.jsx(H,{currentPage:g,totalPages:M,onPageChange:V}):null]})]})})},w=({active:r,onClick:n,icon:m,label:s,count:i})=>e.jsxs("button",{onClick:n,className:`flex items-center space-x-1 px-4 py-3 border-b-2 ${r?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-200"}`,children:[e.jsxs("span",{className:"flex items-center",children:[m,e.jsx("span",{className:"ml-1",children:s})]}),i>0&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${r?"bg-blue-500/20 text-blue-300":"bg-gray-700 text-gray-300"}`,children:i})]});export{U as default};
